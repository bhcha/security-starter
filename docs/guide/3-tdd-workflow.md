## 🧪 TDD 개발 프로세스

### TDD 사이클
1. **Red**: 실패하는 테스트 작성
2. **Green**: 테스트를 통과하는 최소한의 코드 구현
3. **Refactor**: 코드 구조 개선

### TDD 규칙
- 한 번에 하나의 테스트만 작성
- 테스트 없이 프로덕션 코드 작성 금지
- 실패하는 테스트 없이 리팩토링 금지
- 구조 변경과 기능 변경을 분리하여 커밋

### Tidy First 원칙
- **구조적 변경**: 코드 재배치, 이름 변경, 메서드 추출
- **행동적 변경**: 기능 추가 또는 수정
- 두 가지 변경을 절대 섞지 않음
- 구조적 변경을 먼저 수행

### 커밋 규칙
- 모든 테스트 통과 시에만 커밋
- 컴파일러/린터 경고 없을 때만 커밋
- 단일 논리적 작업 단위로 커밋
- 커밋 메시지에 구조적/행동적 변경 명시

## 🎯 핵심 원칙
```
❌ 도메인 모델에 없으면 만들지 마세요!
```

### TDD 위반
```
❌ 테스트 없이 프로덕션 코드 작성
❌ 여러 테스트 동시 작성
❌ 실패 확인 없이 구현
❌ RED 상태에서 리팩토링
```

### DDD 위반
```
❌ 도메인 로직을 도메인 밖에 구현
❌ 불변 규칙 미구현
❌ public setter 사용
❌ 도메인 이벤트 누락
```

### 테스트 품질 지표
- **테스트 실행 시간**: 단위 테스트는 10ms 이내
- **테스트 독립성**: 각 테스트는 독립적으로 실행 가능
- **테스트 명확성**: 실패 시 원인을 즉시 파악 가능
- **테스트 안정성**: Flaky 테스트 0%

## 🚫 TDD 안티패턴

### 1. 테스트 없이 코드 작성
```java
// ❌ 프로덕션 코드를 먼저 작성
public class ClientService {
    public void updateClient(Client client) {
        // 복잡한 비즈니스 로직
        // 테스트는 나중에...
    }
}
```

### 2. 한 번에 여러 테스트 작성
```java
// ❌ 여러 테스트를 한꺼번에 작성
@Test
void test1() { /* RED */ }

@Test
void test2() { /* RED */ }

@Test
void test3() { /* RED */ }

// 이제 구현...?
```

### 3. 테스트를 위한 프로덕션 코드 변경
```java
// ❌ 테스트를 위해 접근 제한자 완화
public class ClientCredentials {
    // 테스트를 위해 public으로 변경
    public int failedAttempts;  // 원래는 private이어야 함
}
```

### 4. 과도한 Mock 사용
```java
// ❌ 모든 것을 Mock으로 처리
@Test
void shouldAuthenticate() {
    ClientCredentials mockClient = mock(ClientCredentials.class);
    when(mockClient.authenticate(any())).thenReturn(AuthenticationResult.success());
    
    // 실제로 아무것도 테스트하지 않음
}
```

## 📚 TDD 체크리스트

### 매 사이클마다 확인
- [ ] 실패하는 테스트를 먼저 작성했는가?
- [ ] 테스트가 올바른 이유로 실패하는가?
- [ ] 최소한의 코드로 테스트를 통과시켰는가?
- [ ] 모든 테스트가 여전히 통과하는가?
- [ ] 리팩토링이 필요한가?
- [ ] 커밋할 준비가 되었는가?

### 커밋 전 확인
- [ ] 모든 테스트가 통과하는가?
- [ ] 컴파일 경고가 없는가?
- [ ] 코드 스타일이 일관적인가?
- [ ] 커밋 메시지가 명확한가?
- [ ] 구조적/행동적 변경이 분리되었는가?

## 🎯 TDD 실천 지침

### 1. 작은 단계로 진행
- 한 번에 하나의 작은 기능만 구현
- 15분 이상 RED 상태 유지 금지
- 복잡한 기능은 작은 단위로 분할

### 2. 테스트 우선
- 항상 테스트부터 작성
- 테스트 없는 코드는 존재하지 않음
- 테스트가 설계를 주도

### 3. 지속적 리팩토링
- GREEN 상태에서만 리팩토링
- 작은 개선을 자주 수행
- 코드 중복 제거 최우선

### 4. 빠른 피드백
- 테스트는 빠르게 실행되어야 함
- 자주 실행하여 즉각적 피드백
- 실패 시 즉시 수정